{% extends "base.html" %}

{% block content %}
    <div class="container">
        <h2><i class="bi bi-tachometer-alt"></i> Dashboard</h2>
        <hr class="section-separator">

        <!-- Dashboard Cards -->
        <div class="dashboard-cards">
            <div class="dashboard-card" onclick="toggleSection('announcements')">
                <div class="card-header">
                    <i class="bi bi-megaphone"></i>
                    <h3>Announcements</h3>
                    {% if new_announcements_count > 0 %}
                        <span class="new-badge" id="announcements-count">{{ new_announcements_count }}</span>
                    {% endif %}
                </div>
            </div>

            <div class="dashboard-card" onclick="toggleSection('sticky-notes')">
                <div class="card-header">
                    <i class="bi bi-sticky"></i>
                    <h3>Sticky Notes</h3>
                </div>
            </div>
        </div>

        <!-- Announcements Section -->
        <div id="announcements" class="expandable-section">
            <div class="section-header">
                <h3><i class="bi bi-megaphone"></i> Company Announcements <i class="bi bi-chevron-down toggle-icon"></i></h3>
                <div class="section-actions">
                    <a href="{{ url_for('main.add_announcement') }}" class="btn btn-primary"><i class="bi bi-plus"></i> New Announcement</a>
                    <a href="{{ url_for('main.announcement_archive') }}" class="btn btn-info"><i class="bi bi-archive"></i> View Archive</a>
                </div>
            </div>
            <hr class="section-separator">
            <div class="announcements">
                {% if announcements %}
                    {% for announcement in announcements %}
                        <div class="announcement-card">
                            <div class="announcement-header">
                                <h5>{{ announcement.topic }}</h5>
                                <span class="announcement-date">{{ announcement.created_at.strftime('%B %d, %Y %H:%M IRST') }}</span>
                            </div>
                            <div class="announcement-body">
                                <p class="announcement-author"><strong>Posted by:</strong> {{ announcement.user.first_name }} {{ announcement.user.last_name }}</p>
                                <p class="announcement-content">{{ announcement.text }}</p>
                                {% if announcement.attachment %}
                                    <p class="announcement-attachment">
                                        <strong>Attachment:</strong>
                                        <a href="{{ url_for('main.download_file', filename=announcement.attachment) }}" class="btn btn-outline-secondary btn-sm">
                                            <i class="bi bi-download"></i> Download
                                        </a>
                                    </p>
                                {% endif %}
                                <p class="announcement-target"><strong>Target Audience:</strong> {{ announcement.target_group or 'All Employees' }}</p>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="no-content">
                        <p>No active announcements at this time.</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Sticky Notes Section -->
        <div id="sticky-notes" class="expandable-section">
            <div class="section-header">
                <h3><i class="bi bi-sticky"></i> Sticky Notes <i class="bi bi-chevron-down toggle-icon"></i></h3>
                <form method="POST" action="{{ url_for('main.add_sticky_note') }}" class="add-note-form">
                    <textarea name="content" placeholder="Add a new note..." class="form-control" rows="2" required></textarea>
                    <button type="submit" class="btn btn-primary"><i class="bi bi-plus"></i> Add</button>
                </form>
            </div>
            <hr class="section-separator">
            <div class="sticky-notes">
                {% for note in sticky_notes %}
                    <div class="sticky-note">
                        <!-- Edit Sticky Note Form -->
                        <form method="POST" action="{{ url_for('main.edit_sticky_note', note_id=note.id) }}" class="edit-note-form">
                            <textarea name="content" class="form-control sticky-content" rows="3">{{ note.content }}</textarea>
                            <button type="submit" class="btn btn-primary btn-sm"><i class="bi bi-save"></i> Save</button>
                        </form>
                        <!-- Separate Delete Sticky Note Form -->
                        <form method="POST" action="{{ url_for('main.delete_sticky_note', note_id=note.id) }}" class="delete-note-form">
                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this note?');">
                                <i class="bi bi-trash"></i> Delete
                            </button>
                        </form>
                    </div>
                {% endfor %}
            </div>
        </div>

        <hr class="section-separator">

        <!-- Task Board -->
        <div class="task-board">
            <div class="section-header">
                <h3><i class="bi bi-list-task"></i> Task Board</h3>
                <a href="{{ url_for('main.tasks') }}" class="btn btn-primary"><i class="bi bi-cog"></i> Manage Tasks</a>
            </div>
            <hr class="section-separator">
            <div class="task-columns">
                <!-- Pending Tasks -->
                <div class="task-column" ondragover="allowDrop(event)" ondrop="drop(event, 'pending')">
                    <h4 class="task-column-title">Pending</h4>
                    {% for task in tasks if task.status == 'pending' %}
                        <div id="task-{{ task.id }}" 
                             class="task-card pending {% if task.priority == 'high' %}high-priority{% elif task.priority == 'medium' %}medium-priority{% elif task.priority == 'low' %}low-priority{% endif %}" 
                             draggable="true" 
                             ondragstart="drag(event)">
                            <div class="task-card-header">
                                <i class="bi bi-hourglass-start"></i>
                                <h5>{{ task.title }}</h5>
                            </div>
                            <div class="task-card-body">
                                <p><strong>Due:</strong> {{ task.due_date.strftime('%Y-%m-%d') }}</p>
                                <p><strong>Priority:</strong> {{ task.priority | capitalize }}</p>
                                <p><strong>Description:</strong> {{ task.description | capitalize }}</p>
                                <p><strong>State:</strong> {{ task.state_description or 'Not updated' }}</p>
                                <p><strong>Last Updated:</strong> {{ task.last_updated.strftime('%Y-%m-%d %H:%M IRST') if task.last_updated else 'Not updated yet' }}</p>
                                <div class="task-actions">
                                    <a href="{{ url_for('main.edit_task', task_id=task.id) }}" class="btn btn-info btn-sm"><i class="bi bi-pencil"></i> Edit</a>
                                </div>
                            </div>
                        </div>
                        {% if not loop.last %}<hr class="card-separator">{% endif %}
                    {% endfor %}
                </div>

                <!-- In Progress Tasks -->
                <div class="task-column" ondragover="allowDrop(event)" ondrop="drop(event, 'in_progress')">
                    <h4 class="task-column-title">In Progress</h4>
                    {% for task in tasks if task.status == 'in_progress' %}
                        <div id="task-{{ task.id }}" 
                             class="task-card in-progress {% if task.priority == 'high' %}high-priority{% elif task.priority == 'medium' %}medium-priority{% elif task.priority == 'low' %}low-priority{% endif %}" 
                             draggable="true" 
                             ondragstart="drag(event)">
                            <div class="task-card-header">
                                <i class="bi bi-cogs"></i>
                                <h5>{{ task.title }}</h5>
                            </div>
                            <div class="task-card-body">
                                <p><strong>Due:</strong> {{ task.due_date.strftime('%Y-%m-%d') }}</p>
                                <p><strong>Priority:</strong> {{ task.priority | capitalize }}</p>
                                <p><strong>Description:</strong> {{ task.description | capitalize }}</p>
                                <p><strong>State:</strong> {{ task.state_description or 'Not updated' }}</p>
                                <p><strong>Last Updated:</strong> {{ task.last_updated.strftime('%Y-%m-%d %H:%M IRST') if task.last_updated else 'Not updated yet' }}</p>
                                <div class="task-actions">
                                    <a href="{{ url_for('main.edit_task', task_id=task.id) }}" class="btn btn-info btn-sm"><i class="bi bi-pencil"></i> Edit</a>
                                </div>
                            </div>
                        </div>
                        {% if not loop.last %}<hr class="card-separator">{% endif %}
                    {% endfor %}
                </div>

                <!-- Finished Tasks -->
                <div class="task-column" ondragover="allowDrop(event)" ondrop="drop(event, 'finished')">
                    <h4 class="task-column-title">Finished</h4>
                    {% for task in tasks if task.status == 'finished' %}
                        <div id="task-{{ task.id }}" 
                             class="task-card finished {% if task.priority == 'high' %}high-priority{% elif task.priority == 'medium' %}medium-priority{% elif task.priority == 'low' %}low-priority{% endif %}" 
                             draggable="true" 
                             ondragstart="drag(event)">
                            <div class="task-card-header">
                                <i class="bi bi-check-circle"></i>
                                <h5>{{ task.title }}</h5>
                            </div>
                            <div class="task-card-body">
                                <p><strong>Due:</strong> {{ task.due_date.strftime('%Y-%m-%d') }}</p>
                                <p><strong>Priority:</strong> {{ task.priority | capitalize }}</p>
                                <p><strong>Description:</strong> {{ task.description | capitalize }}</p>
                                <p><strong>State:</strong> {{ task.state_description or 'Not updated' }}</p>
                                <p><strong>Last Updated:</strong> {{ task.last_updated.strftime('%Y-%m-%d %H:%M IRST') if task.last_updated else 'Not updated yet' }}</p>
                                <div class="task-actions">
                                    <a href="{{ url_for('main.edit_task', task_id=task.id) }}" class="btn btn-info btn-sm"><i class="bi bi-pencil"></i> Edit</a>
                                </div>
                            </div>
                        </div>
                        {% if not loop.last %}<hr class="card-separator">{% endif %}
                    {% endfor %}
                </div>

                <!-- Done Tasks -->
                <div class="task-column" ondragover="allowDrop(event)" ondrop="drop(event, 'done')">
                    <h4 class="task-column-title">Done</h4>
                    {% for task in tasks if task.status == 'done' %}
                        <div id="task-{{ task.id }}" 
                             class="task-card done {% if task.priority == 'high' %}high-priority{% elif task.priority == 'medium' %}medium-priority{% elif task.priority == 'low' %}low-priority{% endif %}" 
                             draggable="true" 
                             ondragstart="drag(event)">
                            <div class="task-card-header">
                                <i class="bi bi-check-circle-fill"></i>
                                <h5>{{ task.title }}</h5>
                            </div>
                            <div class="task-card-body">
                                <p><strong>Due:</strong> {{ task.due_date.strftime('%Y-%m-%d') }}</p>
                                <p><strong>Priority:</strong> {{ task.priority | capitalize }}</p>
                                <p><strong>Description:</strong> {{ task.description | capitalize }}</p>
                                <p><strong>State:</strong> {{ task.state_description or 'Not updated' }}</p>
                                <p><strong>Last Updated:</strong> {{ task.last_updated.strftime('%Y-%m-%d %H:%M IRST') if task.last_updated else 'Not updated yet' }}</p>
                                <div class="task-actions">
                                    <a href="{{ url_for('main.edit_task', task_id=task.id) }}" class="btn btn-info btn-sm"><i class="bi bi-pencil"></i> Edit</a>
                                </div>
                            </div>
                        </div>
                        {% if not loop.last %}<hr class="card-separator">{% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="task-toggle">
                {% if load_earlier %}
                    <a href="{{ url_for('main.dashboard', load_earlier='false') }}" class="btn btn-primary"><i class="bi bi-arrow-up"></i> Show Less</a>
                {% else %}
                    <a href="{{ url_for('main.dashboard', load_earlier='true') }}" class="btn btn-primary"><i class="bi bi-arrow-down"></i> Load Earlier Tasks</a>
                {% endif %}
            </div>
        </div>

        <hr class="section-separator">

        <!-- Upcoming Meetings Section -->
        <div class="upcoming-meetings">
            <div class="section-header">
                <h3><i class="bi bi-calendar-event"></i> Upcoming Meetings</h3>
            </div>
            <hr class="section-separator">
            <div class="meeting-cards">
                {% if meetings %}
                    {% for meeting in meetings %}
                        <div class="meeting-card">
                            <div class="meeting-card-header">
                                <h5>{{ meeting.title }}</h5>
                                <p><strong>Scheduled By:</strong> {{ meeting.scheduled_by | user_name }}</p>
                            </div>
                            <hr class="card-separator">
                            <div class="meeting-card-body">
                                <p><strong>Date:</strong> {{ meeting.scheduled_date.strftime('%A, %B %d, %Y %H:%M') }}</p>
                                <p><strong>Location:</strong> {{ meeting.location }}</p>
                            </div>
                            <hr class="card-separator">
                            <div class="meeting-card-footer">
                                <a href="{{ url_for('main.meetings') }}" class="btn btn-info"><i class="bi bi-eye"></i> View Details</a>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="no-content">
                        <p>No upcoming meetings.</p>
                        <a href="{{ url_for('main.meetings') }}" class="btn btn-info"><i class="bi bi-cog"></i> Manage Meetings</a>
                    </div>
                {% endif %}
            </div>
        </div>

        <hr class="section-separator">

        <!-- Quick Links -->
        <div class="quick-links">
            <div class="section-header">
                <h3><i class="bi bi-link-45deg"></i> Quick Links</h3>
            </div>
            <hr class="section-separator">
            <div class="link-cards">
                <div class="link-card blue"><i class="bi bi-clipboard-check"></i><h5>Requests</h5><a href="{{ url_for('main.view_requests') }}" class="btn btn-link">Go to Requests</a></div>
                <div class="link-card orange"><i class="bi bi-exclamation-triangle"></i><h5>Incident & Event Reports</h5><a href="{{ url_for('main.profile') }}" class="btn btn-link">View Reports</a></div>
                <div class="link-card green"><i class="bi bi-file-earmark-text"></i><h5>Tender Estimation</h5><a href="https://tender-app.streamlit.app/" class="btn btn-link">Tender Estimation</a></div>
                <div class="link-card purple"><i class="bi bi-gear"></i><h5>Auto Report Generator</h5><a href="{{ url_for('main.profile') }}" class="btn btn-link">Generate Report</a></div>
                <div class="link-card red"><i class="bi bi-box-seam"></i><h5>Inventory</h5><a href="https://paniz-energy.com/" class="btn btn-link">Manage Inventory</a></div>
                <div class="link-card teal"><i class="bi bi-tools"></i><h5>Maintenance & Operation</h5><a href="https://paniz-energy.com/" class="btn btn-link">Manage</a></div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        function allowDrop(event) { event.preventDefault(); }
        function drag(event) { event.dataTransfer.setData("task_id", event.target.id.split("-")[1]); }
        function drop(event, newStatus) {
            event.preventDefault();
            var taskId = event.dataTransfer.getData("task_id");
            var taskElement = document.getElementById("task-" + taskId);
            event.currentTarget.appendChild(taskElement);
            fetch("{{ url_for('main.update_task_status') }}", {  
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ task_id: taskId, status: newStatus })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log(data);
                if (data.error) {
                    alert(data.error);  
                    location.reload();  
                } else {
                    // Update task card styling based on new status
                    taskElement.classList.remove('pending', 'in-progress', 'finished', 'done');
                    taskElement.classList.add(newStatus.replace('_', '-'));
                    let header = taskElement.querySelector('.task-card-header');
                    let icon = header.querySelector('i');
                    if (newStatus === 'pending') {
                        icon.className = 'bi bi-hourglass-start';
                    } else if (newStatus === 'in_progress') {
                        icon.className = 'bi bi-cogs';
                    } else if (newStatus === 'finished') {
                        icon.className = 'bi bi-check-circle';
                    } else if (newStatus === 'done') {
                        icon.className = 'bi bi-check-circle-fill';
                    }
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Failed to update task status');
                location.reload();  
            });
        }
    
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const icon = section.querySelector('.toggle-icon');
            const isVisible = section.style.display === 'block';
            document.querySelectorAll('.expandable-section').forEach(s => {
                s.style.display = 'none';
                const i = s.querySelector('.toggle-icon');
                if (i) i.classList.replace('bi-chevron-up', 'bi-chevron-down');
            });
            section.style.display = isVisible ? 'none' : 'block';
            if (icon) {
                icon.classList.toggle('bi-chevron-down', !isVisible);
                icon.classList.toggle('bi-chevron-up', isVisible);
            }
            if (sectionId === 'announcements' && document.getElementById('announcements-count')) {
                fetch('{{ url_for("main.announcements_viewed") }}', {
                    method: "POST",
                    headers: { "Content-Type": "application/json" }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        document.getElementById('announcements-count').style.display = 'none';
                    }
                });
            }
        }

        // Initialize sections as collapsed
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.expandable-section').forEach(s => s.style.display = 'none');
        });
    </script>

    <style>
        :root {
            --primary: #1a365d; /* Deep navy for headers */
            --secondary: #38b2ac; /* Soft teal for buttons and accents */
            --accent: #f56565; /* Soft red for errors/highlights */
            --background: #edf2f7; /* Light gray-blue for page background */
            --card-bg: #ffffff; /* White for cards */
            --text: #2d3748; /* Dark gray for text */
            --muted: #718096; /* Muted gray for secondary text */
            --sticky-bg: #fefcbf; /* Light yellow for sticky notes */
            --done-bg: #e9ffe9; /* Light green for done tasks */
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 30px 20px; }
        h2 { font-size: 2.2rem; color: var(--primary); margin-bottom: 20px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
        h3 { font-size: 1.6rem; color: var(--primary); font-weight: 600; display: flex; align-items: center; gap: 8px; }
        h4 { font-size: 1.3rem; color: var(--primary); font-weight: 500; }
        h5 { font-size: 1.1rem; color: var(--text); margin: 0; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; cursor: pointer; }
        .section-actions { display: flex; gap: 10px; align-items: center; }
        .toggle-icon { font-size: 1rem; color: var(--muted); transition: transform 0.3s ease; }
        .toggle-icon.bi-chevron-up { transform: rotate(180deg); }
        .section-separator { border: 0; height: 1px; background: linear-gradient(to right, var(--secondary), transparent); margin: 20px 0; }
        .card-separator { border: 0; height: 1px; background: rgba(0, 0, 0, 0.1); margin: 15px 0; }
        .btn { padding: 8px 16px; border-radius: 8px; font-size: 0.9rem; font-weight: 500; text-decoration: none; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 6px; }
        .btn-primary { background: var(--secondary); color: white; border: none; }
        .btn-primary:hover { background: #319795; transform: translateY(-1px); }
        .btn-info { background: #4299e1; color: white; border: none; }
        .btn-info:hover { background: #3182ce; transform: translateY(-1px); }
        .btn-danger { background: var(--accent); color: white; border: none; }
        .btn-danger:hover { background: #e53e3e; transform: translateY(-1px); }
        .btn-sm { padding: 6px 12px; font-size: 0.85rem; }
        .btn-outline-secondary { border: 1px solid var(--muted); color: var(--muted); background: none; }
        .btn-outline-secondary:hover { background: var(--muted); color: white; }
        .btn-link { background: none; color: var(--secondary); padding: 6px 12px; border-radius: 8px; border: 1px solid var(--secondary); }
        .btn-link:hover { background: var(--secondary); color: white; }

        /* Dashboard Cards */
        .dashboard-cards { display: flex; gap: 15px; margin-bottom: 20px; }
        .dashboard-card { background: var(--card-bg); padding: 15px; border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.05); flex: 1; text-align: center; cursor: pointer; transition: all 0.2s ease; }
        .dashboard-card:hover { transform: translateY(-3px); box-shadow: 0 5px 12px rgba(0,0,0,0.1); }
        .card-header { display: flex; align-items: center; justify-content: center; gap: 8px; }
        .card-header i { font-size: 1.8rem; color: var(--secondary); }
        .card-header h3 { font-size: 1.4rem; color: var(--primary); margin: 0; }
        .new-badge { background: var(--accent); color: white; border-radius: 50%; width: 20px; height: 20px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.85rem; margin-left: 8px; }

        /* Expandable Sections */
        .expandable-section { display: none; background: var(--card-bg); padding: 15px; border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.05); }
        
        /* Announcements */
        .announcements { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .announcement-card { 
            background: var(--card-bg); 
            border-radius: 8px; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.05); 
            overflow: hidden; 
            transition: all 0.2s ease; 
        }
        .announcement-card:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .announcement-header { 
            background: var(--primary); 
            padding: 8px 12px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }
        .announcement-header h5 { 
            color: white; 
            font-size: 1.1rem; 
            font-weight: 600; 
            margin: 0; 
            flex-grow: 1; 
        }
        .announcement-date { 
            color: #e2e8f0; 
            font-size: 0.8rem; 
            font-style: italic; 
        }
        .announcement-body { padding: 12px; }
        .announcement-author { font-size: 0.85rem; color: var(--muted); margin: 0 0 8px; }
        .announcement-content { font-size: 0.9rem; color: var(--text); line-height: 1.5; margin: 0 0 8px; }
        .announcement-attachment { font-size: 0.85rem; color: var(--muted); margin: 0 0 8px; }
        .announcement-target { font-size: 0.85rem; color: var(--muted); margin: 0; font-style: italic; }
        .no-content { text-align: center; padding: 15px; color: var(--muted); font-size: 0.9rem; }

        /* Sticky Notes */
        .sticky-notes { display: flex; flex-wrap: wrap; gap: 15px; }
        .sticky-note { 
            background: var(--sticky-bg); 
            padding: 12px; 
            width: 200px; 
            min-height: 150px; 
            box-shadow: 0 3px 6px rgba(0,0,0,0.1); 
            border-radius: 8px; 
            transition: all 0.2s ease; 
        }
        .sticky-note:nth-child(even) { transform: rotate(1deg); }
        .sticky-note:nth-child(odd) { transform: rotate(-1deg); }
        .sticky-note:hover { 
            transform: scale(1.05) rotate(0deg); 
            box-shadow: 0 5px 12px rgba(0,0,0,0.15); 
        }
        .sticky-content { 
            background: none; 
            border: none; 
            width: 100%; 
            height: 100px; 
            resize: none; 
            font-family: 'Roboto', sans-serif; 
            font-size: 0.9rem; 
            color: var(--text); 
        }
        .sticky-actions { display: flex; gap: 5px; margin-top: 8px; }
        .add-note-form { display: flex; gap: 10px; align-items: center; }
        .add-note-form textarea { resize: none; width: 300px; border-radius: 6px; font-size: 0.9rem; }

        /* Task Board */
        .task-columns { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .task-column { background: var(--card-bg); padding: 15px; border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.05); min-height: 200px; transition: all 0.2s ease; }
        .task-column:hover { box-shadow: 0 5px 12px rgba(0,0,0,0.1); }
        .task-column-title { font-size: 1.2rem; color: var(--primary); margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid var(--secondary); }
        .task-card { background: var(--card-bg); border-radius: 8px; padding: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); transition: all 0.2s ease; }
        .task-card:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .task-card-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .task-card-header i { color: var(--secondary); font-size: 1.1rem; }
        .task-card h5 { font-size: 1rem; color: var(--text); margin: 0; }
        .task-card-body p { font-size: 0.85rem; color: var(--muted); margin: 5px 0; }
        .high-priority { border-left: 4px solid var(--accent); }
        .medium-priority { border-left: 4px solid #ecc94b; }
        .low-priority { border-left: 4px solid #48bb78; }
        .done { border-left: 4px solid #48bb78; background: var(--done-bg); }
        .task-actions { margin-top: 8px; text-align: right; }
        .task-toggle { text-align: center; margin-top: 15px; }

        /* Meetings */
        .meeting-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .meeting-card { background: var(--card-bg); padding: 15px; border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.05); transition: all 0.2s ease; }
        .meeting-card:hover { transform: translateY(-2px); box-shadow: 0 5px 12px rgba(0,0,0,0.1); }
        .meeting-card-header h5 { color: var(--primary); font-size: 1.1rem; margin-bottom: 6px; }
        .meeting-card-header p, .meeting-card-body p { font-size: 0.85rem; color: var(--muted); margin: 5px 0; }
        .meeting-card-footer { margin-top: 12px; text-align: right; }

        /* Quick Links */
        .link-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .link-card { background: var(--card-bg); padding: 20px; border-radius: 10px; box-shadow: 0 3px 8px rgba(0,0,0,0.05); text-align: center; transition: all 0.2s ease; }
        .link-card:hover { transform: translateY(-3px); box-shadow: 0 5px 12px rgba(0,0,0,0.1); }
        .link-card i { font-size: 1.8rem; margin-bottom: 10px; display: block; }
        .link-card h5 { font-size: 1rem; color: var(--text); margin-bottom: 10px; }
        .link-card.blue i { color: #4299e1; }
        .link-card.orange i { color: #ed8936; }
        .link-card.green i { color: #48bb78; }
        .link-card.purple i { color: #9f7aea; }
        .link-card.red i { color: var(--accent); }
        .link-card.teal i { color: var(--secondary); }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .task-columns { grid-template-columns: repeat(2, 1fr); }
            .announcements, .meeting-cards { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); }
        }
        @media (max-width: 768px) {
            .task-columns { grid-template-columns: 1fr; }
            .dashboard-cards { flex-direction: column; }
            .sticky-notes { flex-direction: column; }
            .sticky-note { width: 100%; transform: none; }
            .sticky-note:hover { transform: scale(1.02); }
            .add-note-form textarea { width: 100%; }
            .link-cards { grid-template-columns: 1fr; }
        }
    </style>
{% endblock %}
